.PHONY: install build watch serve deploy clean

.ONESHELL:

install:
	@echo "ğŸ“¦ Installing dependencies from root..."
	@cd ../.. && pnpm install

build:
	@echo "ğŸ”¨ Building function..."
	@pnpm exec tsup
	@echo "âœ… Build complete."

watch:
	@echo "ğŸ”¨ Building function..."
	@pnpm exec tsup --watch
	@echo "âœ… Build complete."

serve:
	@echo "ğŸš€ Starting emulator..."
	@firebase emulators:start --only functions

deploy:
	@echo "â˜ï¸  Deploying to Firebase..."
	@firebase deploy --only functions

clean:
	@echo "ğŸ§¹ Cleaning dist..."
	@pnpm exec rimraf dist